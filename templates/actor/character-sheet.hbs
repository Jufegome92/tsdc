<section class="t-card t-col" style="gap:12px;">
  <header class="t-row">
    <h1 style="margin:0;">{{actor.name}}</h1>
    <div class="t-right muted">{{localize "TSDC.System"}}</div>
  </header>

  <nav class="sheet-tabs t-row" data-group="primary">
    <a class="item" data-tab="main">Básico</a>
    <a class="item" data-tab="rolls">Tiradas</a>
  </nav>

  <section class="sheet-body">
    <div class="tab t-col" data-group="primary" data-tab="main">
      <div class="t-grid t-grid-3">

        {{!-- Atributos --}}
        <div class="t-card t-col">
          <h3 style="margin:0 0 6px 0;">Atributos</h3>

          {{!-- Cada campo edita system.attributes.<clave> --}}
          <div class="t-field">
            <label>{{labels.strength}}</label>
            <input type="number" name="system.attributes.strength" value="{{system.attributes.strength}}" />
          </div>
          <div class="t-field">
            <label>{{labels.agi}}</label>
            <input type="number" name="system.attributes.agility" value="{{system.attributes.agility}}" />
          </div>
          <div class="t-field">
            <label>{{labels.ten}}</label>
            <input type="number" name="system.attributes.tenacity" value="{{system.attributes.tenacity}}" />
          </div>
          <div class="t-field">
            <label>{{labels.cun}}</label>
            <input type="number" name="system.attributes.cunning" value="{{system.attributes.cunning}}" />
          </div>
          <div class="t-field">
            <label>{{labels.wis}}</label>
            <input type="number" name="system.attributes.wisdom" value="{{system.attributes.wisdom}}" />
          </div>
          <div class="t-field">
            <label>{{labels.int}}</label>
            <input type="number" name="system.attributes.intellect" value="{{system.attributes.intellect}}" />
          </div>
          <div class="t-field">
            <label>{{labels.aur}}</label>
            <input type="number" name="system.attributes.aura" value="{{system.attributes.aura}}" />
          </div>
          <div class="t-field">
            <label>{{labels.com}}</label>
            <input type="number" name="system.attributes.composure" value="{{system.attributes.composure}}" />
          </div>
          <div class="t-field">
            <label>{{labels.pre}}</label>
            <input type="number" name="system.attributes.presence" value="{{system.attributes.presence}}" />
          </div>
        </div>

        {{!-- Derivados (solo lectura porque se recalculan) --}}
        <div class="t-card t-col">
          <h3 style="margin:0 0 6px 0;">Derivados</h3>
          <div class="t-row">
            <div class="t-field" style="flex:1;">
              <label>{{labels.prep}}</label>
              <input type="number" value="{{system.derived.preparation}}" disabled />
            </div>
            <div class="t-field" style="flex:1;">
              <label>{{labels.resi}}</label>
              <input type="number" value="{{system.derived.resilience}}" disabled />
            </div>
          </div>
          <span class="muted">Se recalculan automáticamente con tus atributos.</span>
        </div>

        {{!-- Placeholder libre / notas --}}
        <div class="t-card t-col">
          <h3 style="margin:0 0 6px 0;">Notas</h3>
          <textarea name="system.notes" rows="8">{{system.notes}}</textarea>
        </div>

      </div>
    </div>

    {{!-- Tab de tiradas demo (usa Ventaja Evolutiva) --}}
    <div class="tab t-col" data-group="primary" data-tab="rolls">
      <div class="t-card t-col">
        <h3 style="margin:0 0 6px 0;">Prueba de Tirada (demo)</h3>

        <div class="t-row" style="gap:12px;">
          <div class="t-field">
            <label>Modo</label>
            <select name="evoMode">
              <option value="ask">Elegir al tirar</option>
              <option value="execution">Ejecución (mejor resultado)</option>
              <option value="learning">Aprendizaje (peor resultado)</option>
              <option value="none">Sin ventaja</option>
            </select>
          </div>
          <div class="t-field">
            <label>Base</label>
            <input type="number" name="base" value="3"/>
          </div>
          <div class="t-field">
            <label>Bono</label>
            <input type="number" name="bonus" value="1"/>
          </div>
          <div class="t-field">
            <label>Penal.</label>
            <input type="number" name="diff" value="0"/>
          </div>
          <div class="t-field">
            <label>DC</label>
            <input type="number" name="dc" value="10"/>
          </div>
          <div class="t-field">
            <label>Rango</label>
            <input type="number" name="rank" value="2"/>
          </div>

          <button type="button" class="t-btn" data-action="evo-roll">Tirar</button>
        </div>

        <span class="muted">Esto publica una tirada en el chat usando la Ventaja Evolutiva.</span>
      </div>
    </div>
  </section>
</section>
