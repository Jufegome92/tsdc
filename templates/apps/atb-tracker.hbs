<div class="tsdc-atb-tracker">
  <header class="tt-head">
    <div class="tt-title">ATB — Tracker</div>

    <div class="tt-controls" style="display:flex; align-items:center; gap:10px;">
      <button type="button" data-action="tick-prev" title="Tick de planeación anterior">‹</button>
      <div>Plan: <b>{{planningTick}}</b></div>
      <button type="button" data-action="tick-next" title="Tick de planeación siguiente">›</button>

      {{#if isGM}}
        <span style="margin-left:16px;"></span>
        <button type="button" data-action="step" class="t-prim">Avanzar 1 tick</button>
        <button type="button" data-action="reset" class="t-muted">Reset</button>
      {{/if}}

      <span style="flex:1;"></span>
      <button type="button" data-action="plan">Planear</button>
      <button type="button" data-action="close">Cerrar</button>
    </div>

    <div class="tt-ticks" style="--cols: {{horizon}}">
      {{#each cols as |t|}}<div class="tt-tick">{{t}}</div>{{/each}}
    </div>
  </header>

  <section class="tt-rows">
    {{#each rows as |row|}}
      <div class="tt-row">
        <div class="tt-who">{{row.name}}</div>
        <div class="tt-line" style="--cols: {{../horizon}}">
          {{#each segments as |seg|}}
            <div class="tt-seg phase-{{seg.phase}} {{#if seg.active}}is-active{{/if}}" style="grid-column: {{seg.gridColumn}};">
              <span class="tt-label">{{seg.label}}</span>
            </div>
          {{/each}}
        </div>
      </div>
    {{/each}}
  </section>
</div>
