<div class="tsdc-atb-plan">
  <header class="t-row" style="align-items:center; gap:10px; margin-bottom:10px;">
    <div class="t-title">Planear acciones — <b>{{actorName}}</b></div>
    <span style="flex:1;"></span>
    <button type="button" data-action="close">Cerrar</button>
  </header>

  <div class="t-col" style="gap:12px;">
    <div class="t-row" style="gap:10px; align-items:center;">
      <label>Tick destino</label>
      <input name="targetTick" type="number" value="{{planningTick}}" style="width:120px;">
    </div>

    <section class="t-card">
      <h3>Acción básica</h3>
      <div class="t-row" style="gap:10px; align-items:center;">
        <select name="basicKey" style="min-width:260px;">
          <option value="">— Elegir —</option>
          {{#each basicOptions as |o|}}
            <option value="{{o.id}}">{{o.name}}</option>
          {{/each}}
        </select>
        <span style="flex:1;"></span>
        <button type="button" data-action="plan-basic">Encolar acción básica</button>
      </div>
    </section>

    <section class="t-card">
      <h3>Maniobra</h3>
      <div class="t-row" style="gap:10px; align-items:center;">
        <select name="maneuverKey" style="min-width:260px;">
          <option value="">— Elegir —</option>
          {{#each maneuverOptions as |o|}}
            <option value="{{o.key}}">{{o.name}}</option>
          {{/each}}
        </select>
        <span style="flex:1;"></span>
        <button type="button" data-action="plan-maneuver">Encolar maniobra</button>
      </div>
    </section>

    <section class="t-card">
      <h3>Poder de reliquia</h3>
      <div class="t-row" style="gap:10px; align-items:center;">
        <select name="relicKey" style="min-width:260px;">
          <option value="">— Elegir —</option>
          {{#each relicOptions as |o|}}
            <option value="{{o.key}}">{{o.name}}</option>
          {{/each}}
        </select>
        <span style="flex:1;"></span>
        <button type="button" data-action="plan-relic">Encolar poder</button>
      </div>
    </section>

    {{#if monsterAbilityOptions.length}}
    <section class="t-card">
      <h3>Habilidad de criatura</h3>
      <div class="t-row" style="gap:10px; align-items:center;">
        <select name="monsterAbilityKey" style="min-width:260px;">
          <option value="">— Elegir —</option>
          {{#each monsterAbilityOptions as |o|}}
            <option value="{{o.key}}" {{#if o.disabled}}disabled{{/if}} {{#if o.reason}}title="{{o.reason}}"{{/if}}>{{o.name}}{{#if o.disabled}} — {{o.reason}}{{/if}}</option>
          {{/each}}
        </select>
        <span style="flex:1;"></span>
        <button type="button" data-action="plan-monster">Encolar habilidad</button>
      </div>
    </section>
    {{/if}}

    <section class="t-card">
      <h3>Aptitud</h3>
      <div class="t-row" style="gap:10px; align-items:center;">
        <select name="aptitudeKey" style="min-width:260px;">
          <option value="">— Elegir —</option>
          {{#each aptitudesOptions as |o|}}
            <option value="{{o.key}}">{{o.name}}</option>
          {{/each}}
        </select>
        <span style="flex:1;"></span>
        <button type="button" data-action="plan-aptitude">Encolar aptitud</button>
      </div>
    </section>
    
    <section class="t-card">
      <h3>Especialización</h3>
      <div class="t-row" style="gap:10px; flex-wrap:wrap; align-items:center;">
        <label>Clave <input name="specKey" placeholder="p.ej. acrobacias" style="width:200px;"></label>
        <label>Cat.
          <select name="specCat" style="width:160px;">
            {{#each specCategories as |cat|}}
              <option value="{{cat.key}}" {{#if cat.isDefault}}selected{{/if}}>{{cat.label}}</option>
            {{/each}}
          </select>
        </label>
        <label>Esp.
          <select name="specSelect" style="width:220px;">
            <option value="">— Elegir —</option>
            {{#each specOptionsInitial as |opt|}}
              <option value="{{opt.key}}">{{opt.label}}</option>
            {{/each}}
          </select>
        </label>
        <label>CT
          <select name="specCT" style="width:90px;">
            <option>1</option><option selected>2</option><option>3</option>
          </select>
        </label>
        <span style="flex:1;"></span>
        <button type="button" data-action="plan-spec">Encolar especialización</button>
      </div>
    </section>
  </div>
</div>
